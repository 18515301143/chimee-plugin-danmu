!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.chimeePluginDanmu=t()}(this,function(){"use strict";var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function n(e,t){return e(t={exports:{}},t.exports),t.exports}var r=t(n(function(e,t){t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}})),x=n(function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)}),v=n(function(e){var t=e.exports={version:"2.6.0"};"number"==typeof __e&&(__e=t)}),s=(v.version,function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}),g=function(i,r,e){if(s(i),void 0===r)return i;switch(e){case 1:return function(e){return i.call(r,e)};case 2:return function(e,t){return i.call(r,e,t)};case 3:return function(e,t,n){return i.call(r,e,t,n)}}return function(){return i.apply(r,arguments)}},k=function(e){return"object"==typeof e?null!==e:"function"==typeof e},p=function(e){if(!k(e))throw TypeError(e+" is not an object!");return e},E=function(e){try{return!!e()}catch(e){return!0}},O=!E(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),i=x.document,o=k(i)&&k(i.createElement),a=function(e){return o?i.createElement(e):{}},u=!O&&!E(function(){return 7!=Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a}),c=function(e,t){if(!k(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!k(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!k(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!k(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")},f=Object.defineProperty,l={f:O?Object.defineProperty:function(e,t,n){if(p(e),t=c(t,!0),p(n),u)try{return f(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},S=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},A=O?function(e,t,n){return l.f(e,t,S(1,n))}:function(e,t,n){return e[t]=n,e},d={}.hasOwnProperty,m=function(e,t){return d.call(e,t)},w="prototype",y=function(e,t,n){var i,r,o,s=e&y.F,a=e&y.G,u=e&y.S,c=e&y.P,f=e&y.B,l=e&y.W,d=a?v:v[t]||(v[t]={}),h=d[w],p=a?x:u?x[t]:(x[t]||{})[w];for(i in a&&(n=t),n)(r=!s&&p&&void 0!==p[i])&&m(d,i)||(o=r?p[i]:n[i],d[i]=a&&"function"!=typeof p[i]?n[i]:f&&r?g(o,x):l&&p[i]==o?function(i){var e=function(e,t,n){if(this instanceof i){switch(arguments.length){case 0:return new i;case 1:return new i(e);case 2:return new i(e,t)}return new i(e,t,n)}return i.apply(this,arguments)};return e[w]=i[w],e}(o):c&&"function"==typeof o?g(Function.call,o):o,c&&((d.virtual||(d.virtual={}))[i]=o,e&y.R&&h&&!h[i]&&A(h,i,o)))};y.F=1,y.G=2,y.S=4,y.P=8,y.B=16,y.W=32,y.U=64,y.R=128;var T=y;T(T.S+T.F*!O,"Object",{defineProperty:l.f});var h,b=v.Object,_=function(e,t,n){return b.defineProperty(e,t,n)},M=n(function(e){e.exports={default:_,__esModule:!0}}),P=t(M),j=t(n(function(e,t){t.__esModule=!0;var n,r=(n=M)&&n.__esModule?n:{default:n};t.default=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,r.default)(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}()})),N=Math.ceil,L=Math.floor,C=function(e){return isNaN(e=+e)?0:(0<e?L:N)(e)},z=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e},R=A,F={},B={}.toString,D=function(e){return B.call(e).slice(8,-1)},G=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==D(e)?e.split(""):Object(e)},I=function(e){return G(z(e))},V=Math.min,H=function(e){return 0<e?V(C(e),9007199254740991):0},W=Math.max,q=Math.min,U=n(function(e){var t="__core-js_shared__",n=x[t]||(x[t]={});(e.exports=function(e,t){return n[e]||(n[e]=void 0!==t?t:{})})("versions",[]).push({version:v.version,mode:"pure",copyright:"Â© 2018 Denis Pushkarev (zloirock.ru)"})}),$=0,K=Math.random(),X=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++$+K).toString(36))},Y=U("keys"),J=function(e){return Y[e]||(Y[e]=X(e))},Q=(h=!1,function(e,t,n){var i,r,o,s=I(e),a=H(s.length),u=(r=a,(i=C(i=n))<0?W(i+r,0):q(i,r));if(h&&t!=t){for(;u<a;)if((o=s[u++])!=o)return!0}else for(;u<a;u++)if((h||u in s)&&s[u]===t)return h||u||0;return!h&&-1}),Z=J("IE_PROTO"),ee=function(e,t){var n,i=I(e),r=0,o=[];for(n in i)n!=Z&&m(i,n)&&o.push(n);for(;t.length>r;)m(i,n=t[r++])&&(~Q(o,n)||o.push(n));return o},te="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),ne=Object.keys||function(e){return ee(e,te)},ie=O?Object.defineProperties:function(e,t){p(e);for(var n,i=ne(t),r=i.length,o=0;o<r;)l.f(e,n=i[o++],t[n]);return e},re=x.document,oe=re&&re.documentElement,se=J("IE_PROTO"),ae=function(){},ue="prototype",ce=function(){var e,t=a("iframe"),n=te.length;for(t.style.display="none",oe.appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),ce=e.F;n--;)delete ce[ue][te[n]];return ce()},fe=Object.create||function(e,t){var n;return null!==e?(ae[ue]=p(e),n=new ae,ae[ue]=null,n[se]=e):n=ce(),void 0===t?n:ie(n,t)},le=n(function(e){var t=U("wks"),n=x.Symbol,i="function"==typeof n;(e.exports=function(e){return t[e]||(t[e]=i&&n[e]||(i?n:X)("Symbol."+e))}).store=t}),de=l.f,he=le("toStringTag"),pe=function(e,t,n){e&&!m(e=n?e:e.prototype,he)&&de(e,he,{configurable:!0,value:t})},ve={};A(ve,le("iterator"),function(){return this});var me,we=function(e){return Object(z(e))},ye=J("IE_PROTO"),ge=Object.prototype,be=Object.getPrototypeOf||function(e){return e=we(e),m(e,ye)?e[ye]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?ge:null},_e=le("iterator"),xe=!([].keys&&"next"in[].keys()),ke="values",Ee=function(){return this},Oe=function(e,t,n,i,r,o,s){var a,u,c;u=t,c=i,(a=n).prototype=fe(ve,{next:S(1,c)}),pe(a,u+" Iterator");var f,l,d,h=function(e){if(!xe&&e in w)return w[e];switch(e){case"keys":case ke:return function(){return new n(this,e)}}return function(){return new n(this,e)}},p=t+" Iterator",v=r==ke,m=!1,w=e.prototype,y=w[_e]||w["@@iterator"]||r&&w[r],g=y||h(r),b=r?v?h("entries"):g:void 0,_="Array"==t&&w.entries||y;if(_&&(d=be(_.call(new e)))!==Object.prototype&&d.next&&pe(d,p,!0),v&&y&&y.name!==ke&&(m=!0,g=function(){return y.call(this)}),s&&(xe||m||!w[_e])&&A(w,_e,g),F[t]=g,F[p]=Ee,r)if(f={values:v?g:h(ke),keys:o?g:h("keys"),entries:b},s)for(l in f)l in w||R(w,l,f[l]);else T(T.P+T.F*(xe||m),t,f);return f},Se=(me=!0,function(e,t){var n,i,r=String(z(e)),o=C(t),s=r.length;return o<0||s<=o?me?"":void 0:(n=r.charCodeAt(o))<55296||56319<n||o+1===s||(i=r.charCodeAt(o+1))<56320||57343<i?me?r.charAt(o):n:me?r.slice(o,o+2):i-56320+(n-55296<<10)+65536});Oe(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=Se(t,n),this._i+=e.length,{value:e,done:!1})});var Ae=function(e,t){return{value:t,done:!!e}};Oe(Array,"Array",function(e,t){this._t=I(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,Ae(1)):Ae(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])},"values");F.Arguments=F.Array;for(var Te=le("toStringTag"),Me="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),Pe=0;Pe<Me.length;Pe++){var je=Me[Pe],Ne=x[je],Le=Ne&&Ne.prototype;Le&&!Le[Te]&&A(Le,Te,je),F[je]=F.Array}var Ce={f:le},ze=Ce.f("iterator"),Re=n(function(e){e.exports={default:ze,__esModule:!0}});t(Re);var Fe=n(function(e){var n=X("meta"),t=l.f,i=0,r=Object.isExtensible||function(){return!0},o=!E(function(){return r(Object.preventExtensions({}))}),s=function(e){t(e,n,{value:{i:"O"+ ++i,w:{}}})},a=e.exports={KEY:n,NEED:!1,fastKey:function(e,t){if(!k(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!m(e,n)){if(!r(e))return"F";if(!t)return"E";s(e)}return e[n].i},getWeak:function(e,t){if(!m(e,n)){if(!r(e))return!0;if(!t)return!1;s(e)}return e[n].w},onFreeze:function(e){return o&&a.NEED&&r(e)&&!m(e,n)&&s(e),e}}}),Be=(Fe.KEY,Fe.NEED,Fe.fastKey,Fe.getWeak,Fe.onFreeze,l.f),De=function(e){var t=v.Symbol||(v.Symbol={});"_"==e.charAt(0)||e in t||Be(t,e,{value:Ce.f(e)})},Ge={f:Object.getOwnPropertySymbols},Ie={f:{}.propertyIsEnumerable},Ve=Array.isArray||function(e){return"Array"==D(e)},He=te.concat("length","prototype"),We={f:Object.getOwnPropertyNames||function(e){return ee(e,He)}},qe=We.f,Ue={}.toString,$e="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Ke={f:function(e){return $e&&"[object Window]"==Ue.call(e)?function(e){try{return qe(e)}catch(e){return $e.slice()}}(e):qe(I(e))}},Xe=Object.getOwnPropertyDescriptor,Ye={f:O?Xe:function(e,t){if(e=I(e),t=c(t,!0),u)try{return Xe(e,t)}catch(e){}if(m(e,t))return S(!Ie.f.call(e,t),e[t])}},Je=Fe.KEY,Qe=Ye.f,Ze=l.f,et=Ke.f,tt=x.Symbol,nt=x.JSON,it=nt&&nt.stringify,rt="prototype",ot=le("_hidden"),st=le("toPrimitive"),at={}.propertyIsEnumerable,ut=U("symbol-registry"),ct=U("symbols"),ft=U("op-symbols"),lt=Object[rt],dt="function"==typeof tt,ht=x.QObject,pt=!ht||!ht[rt]||!ht[rt].findChild,vt=O&&E(function(){return 7!=fe(Ze({},"a",{get:function(){return Ze(this,"a",{value:7}).a}})).a})?function(e,t,n){var i=Qe(lt,t);i&&delete lt[t],Ze(e,t,n),i&&e!==lt&&Ze(lt,t,i)}:Ze,mt=function(e){var t=ct[e]=fe(tt[rt]);return t._k=e,t},wt=dt&&"symbol"==typeof tt.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof tt},yt=function(e,t,n){return e===lt&&yt(ft,t,n),p(e),t=c(t,!0),p(n),m(ct,t)?(n.enumerable?(m(e,ot)&&e[ot][t]&&(e[ot][t]=!1),n=fe(n,{enumerable:S(0,!1)})):(m(e,ot)||Ze(e,ot,S(1,{})),e[ot][t]=!0),vt(e,t,n)):Ze(e,t,n)},gt=function(e,t){p(e);for(var n,i=function(e){var t=ne(e),n=Ge.f;if(n)for(var i,r=n(e),o=Ie.f,s=0;r.length>s;)o.call(e,i=r[s++])&&t.push(i);return t}(t=I(t)),r=0,o=i.length;r<o;)yt(e,n=i[r++],t[n]);return e},bt=function(e){var t=at.call(this,e=c(e,!0));return!(this===lt&&m(ct,e)&&!m(ft,e))&&(!(t||!m(this,e)||!m(ct,e)||m(this,ot)&&this[ot][e])||t)},_t=function(e,t){if(e=I(e),t=c(t,!0),e!==lt||!m(ct,t)||m(ft,t)){var n=Qe(e,t);return!n||!m(ct,t)||m(e,ot)&&e[ot][t]||(n.enumerable=!0),n}},xt=function(e){for(var t,n=et(I(e)),i=[],r=0;n.length>r;)m(ct,t=n[r++])||t==ot||t==Je||i.push(t);return i},kt=function(e){for(var t,n=e===lt,i=et(n?ft:I(e)),r=[],o=0;i.length>o;)!m(ct,t=i[o++])||n&&!m(lt,t)||r.push(ct[t]);return r};dt||(R((tt=function(){if(this instanceof tt)throw TypeError("Symbol is not a constructor!");var t=X(0<arguments.length?arguments[0]:void 0),n=function(e){this===lt&&n.call(ft,e),m(this,ot)&&m(this[ot],t)&&(this[ot][t]=!1),vt(this,t,S(1,e))};return O&&pt&&vt(lt,t,{configurable:!0,set:n}),mt(t)})[rt],"toString",function(){return this._k}),Ye.f=_t,l.f=yt,We.f=Ke.f=xt,Ie.f=bt,Ge.f=kt,Ce.f=function(e){return mt(le(e))}),T(T.G+T.W+T.F*!dt,{Symbol:tt});for(var Et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Ot=0;Et.length>Ot;)le(Et[Ot++]);for(var St=ne(le.store),At=0;St.length>At;)De(St[At++]);T(T.S+T.F*!dt,"Symbol",{for:function(e){return m(ut,e+="")?ut[e]:ut[e]=tt(e)},keyFor:function(e){if(!wt(e))throw TypeError(e+" is not a symbol!");for(var t in ut)if(ut[t]===e)return t},useSetter:function(){pt=!0},useSimple:function(){pt=!1}}),T(T.S+T.F*!dt,"Object",{create:function(e,t){return void 0===t?fe(e):gt(fe(e),t)},defineProperty:yt,defineProperties:gt,getOwnPropertyDescriptor:_t,getOwnPropertyNames:xt,getOwnPropertySymbols:kt}),nt&&T(T.S+T.F*(!dt||E(function(){var e=tt();return"[null]"!=it([e])||"{}"!=it({a:e})||"{}"!=it(Object(e))})),"JSON",{stringify:function(e){for(var t,n,i=[e],r=1;arguments.length>r;)i.push(arguments[r++]);if(n=t=i[1],(k(t)||void 0!==e)&&!wt(e))return Ve(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!wt(t))return t}),i[1]=t,it.apply(nt,i)}}),tt[rt][st]||A(tt[rt],st,tt[rt].valueOf),pe(tt,"Symbol"),pe(Math,"Math",!0),pe(x.JSON,"JSON",!0),De("asyncIterator"),De("observable");var Tt=v.Symbol,Mt=n(function(e){e.exports={default:Tt,__esModule:!0}});t(Mt);var Pt=t(n(function(e,t){t.__esModule=!0;var n=o(Re),i=o(Mt),r="function"==typeof i.default&&"symbol"==typeof n.default?function(e){return typeof e}:function(e){return e&&"function"==typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":typeof e};function o(e){return e&&e.__esModule?e:{default:e}}t.default="function"==typeof i.default&&"symbol"===r(n.default)?function(e){return void 0===e?"undefined":r(e)}:function(e){return e&&"function"==typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":void 0===e?"undefined":r(e)}})),jt=function(e,t){var n=(v.Object||{})[e]||Object[e],i={};i[e]=t(n),T(T.S+T.F*E(function(){n(1)}),"Object",i)};jt("keys",function(){return function(e){return ne(we(e))}});var Nt=v.Object.keys;t(n(function(e){e.exports={default:Nt,__esModule:!0}}));var Lt=Math.floor;T(T.S,"Number",{isInteger:function(e){return!k(e)&&isFinite(e)&&Lt(e)===e}});var Ct=v.Number.isInteger;t(n(function(e){e.exports={default:Ct,__esModule:!0}}));var zt="\t\n\v\f\r Â áá ââââââââââââ¯âã\u2028\u2029\ufeff",Rt="["+zt+"]",Ft=RegExp("^"+Rt+Rt+"*"),Bt=RegExp(Rt+Rt+"*$"),Dt=function(e,t,n){var i={},r=E(function(){return!!zt[e]()||"âÂ"!="âÂ"[e]()}),o=i[e]=r?t(Gt):zt[e];n&&(i[n]=o),T(T.P+T.F*r,"String",i)},Gt=Dt.trim=function(e,t){return e=String(z(e)),1&t&&(e=e.replace(Ft,"")),2&t&&(e=e.replace(Bt,"")),e},It=Dt,Vt=x.parseFloat,Ht=It.trim,Wt=1/Vt(zt+"-0")!=-1/0?function(e){var t=Ht(String(e),3),n=Vt(t);return 0===n&&"-"==t.charAt(0)?-0:n}:Vt;T(T.S+T.F*(Number.parseFloat!=Wt),"Number",{parseFloat:Wt});var qt=v.Number.parseFloat;function Ut(e){return null==e}function $t(e){return Array.isArray(e)}function Kt(e){return"function"==typeof e}function Xt(e){return Object(e)===e&&"[object Object]"===String(e)&&!Kt(e)&&!$t(e)}function Yt(e){return"string"==typeof e||e instanceof String}function Jt(e){return"boolean"==typeof e}function Qt(e){return Ut(e)||Jt(e)||Yt(e)||"number"==typeof e}function Zt(e,t){if(!Yt(e))throw new TypeError("Log's method only acccept string as argument, but not "+e+" in "+(void 0===e?"undefined":Pt(e)));return Yt(t)?"["+(e=en.FORCE_GLOBAL_TAG?en.GLOBAL_TAG:e||en.GLOBAL_TAG)+"] > "+t:"["+en.GLOBAL_TAG+"] > "+e}t(n(function(e){e.exports={default:qt,__esModule:!0}}));var en=function(){function n(){r(this,n)}return j(n,null,[{key:"error",value:function(e,t){n.ENABLE_ERROR&&(console.error||console.warn||console.log).call(console,Zt(e,t))}},{key:"info",value:function(e,t){n.ENABLE_INFO&&(console.info||console.log).call(console,Zt(e,t))}},{key:"warn",value:function(e,t){n.ENABLE_WARN&&(console.warn||console.log).call(console,Zt(e,t))}},{key:"debug",value:function(e,t){n.ENABLE_DEBUG&&(console.debug||console.log).call(console,Zt(e,t))}},{key:"verbose",value:function(e,t){n.ENABLE_VERBOSE&&console.log(Zt(e,t))}}]),n}();en.GLOBAL_TAG="chimee",en.FORCE_GLOBAL_TAG=!1,en.ENABLE_ERROR=!0,en.ENABLE_INFO=!0,en.ENABLE_WARN=!0,en.ENABLE_DEBUG=!0,en.ENABLE_VERBOSE=!0;n(function(x,k){!function(r,l){var d="function",e="undefined",t="model",n="name",i="type",o="vendor",s="version",a="architecture",u="console",c="mobile",f="tablet",h="smarttv",p="wearable",v={extend:function(e,t){var n={};for(var i in e)t[i]&&t[i].length%2==0?n[i]=t[i].concat(e[i]):n[i]=e[i];return n},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:l},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},m={rgx:function(e,t){for(var n,i,r,o,s,a,u=0;u<t.length&&!s;){var c=t[u],f=t[u+1];for(n=i=0;n<c.length&&!s;)if(s=c[n++].exec(e))for(r=0;r<f.length;r++)a=s[++i],"object"==typeof(o=f[r])&&0<o.length?2==o.length?typeof o[1]==d?this[o[0]]=o[1].call(this,a):this[o[0]]=o[1]:3==o.length?typeof o[1]!==d||o[1].exec&&o[1].test?this[o[0]]=a?a.replace(o[1],o[2]):l:this[o[0]]=a?o[1].call(this,a,o[2]):l:4==o.length&&(this[o[0]]=a?o[3].call(this,a.replace(o[1],o[2])):l):this[o]=a||l;u+=2}},str:function(e,t){for(var n in t)if("object"==typeof t[n]&&0<t[n].length){for(var i=0;i<t[n].length;i++)if(v.has(t[n][i],e))return"?"===n?l:n}else if(v.has(t[n],e))return"?"===n?l:n;return e}},w={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},y={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[n,s],[/(opios)[\/\s]+([\w\.]+)/i],[[n,"Opera Mini"],s],[/\s(opr)\/([\w\.]+)/i],[[n,"Opera"],s],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark)\/([\w\.-]+)/i],[n,s],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[n,"IE"],s],[/(edge|edgios|edga)\/((\d+)?[\w\.]+)/i],[[n,"Edge"],s],[/(yabrowser)\/([\w\.]+)/i],[[n,"Yandex"],s],[/(puffin)\/([\w\.]+)/i],[[n,"Puffin"],s],[/(focus)\/([\w\.]+)/i],[[n,"Firefox Focus"],s],[/(opt)\/([\w\.]+)/i],[[n,"Opera Touch"],s],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[n,"UCBrowser"],s],[/(comodo_dragon)\/([\w\.]+)/i],[[n,/_/g," "],s],[/(micromessenger)\/([\w\.]+)/i],[[n,"WeChat"],s],[/(brave)\/([\w\.]+)/i],[[n,"Brave"],s],[/(qqbrowserlite)\/([\w\.]+)/i],[n,s],[/(QQ)\/([\d\.]+)/i],[n,s],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[n,s],[/(BIDUBrowser)[\/\s]?([\w\.]+)/i],[n,s],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[n,s],[/(MetaSr)[\/\s]?([\w\.]+)/i],[n],[/(LBBROWSER)/i],[n],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[s,[n,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[s,[n,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/android.+(line)\/([\w\.]+)\/iab/i],[n,s],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[s,[n,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[n,/(.+)/,"$1 WebView"],s],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[n,/(.+(?:g|us))(.+)/,"$1 $2"],s],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[s,[n,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[n,s],[/(dolfin)\/([\w\.]+)/i],[[n,"Dolphin"],s],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[n,"Chrome"],s],[/(coast)\/([\w\.]+)/i],[[n,"Opera Coast"],s],[/fxios\/([\w\.-]+)/i],[s,[n,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[s,[n,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[s,n],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[n,"GSA"],s],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[n,[s,m.str,w.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[n,s],[/(navigator|netscape)\/([\w\.-]+)/i],[[n,"Netscape"],s],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[n,s]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[a,"amd64"]],[/(ia32(?=;))/i],[[a,v.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[a,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[a,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[a,/ower/,"",v.lowerize]],[/(sun4\w)[;\)]/i],[[a,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[a,v.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[t,o,[i,f]],[/applecoremedia\/[\w\.]+ \((ipad)/],[t,[o,"Apple"],[i,f]],[/(apple\s{0,1}tv)/i],[[t,"Apple TV"],[o,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[o,t,[i,f]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[t,[o,"Amazon"],[i,f]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[t,m.str,w.device.amazon.model],[o,"Amazon"],[i,c]],[/android.+aft([bms])\sbuild/i],[t,[o,"Amazon"],[i,h]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[t,o,[i,c]],[/\((ip[honed|\s\w*]+);/i],[t,[o,"Apple"],[i,c]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[o,t,[i,c]],[/\(bb10;\s(\w+)/i],[t,[o,"BlackBerry"],[i,c]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[t,[o,"Asus"],[i,f]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[o,"Sony"],[t,"Xperia Tablet"],[i,f]],[/android.+\s([c-g]\d{4}|so[-l]\w+)\sbuild\//i],[t,[o,"Sony"],[i,c]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[o,t,[i,u]],[/android.+;\s(shield)\sbuild/i],[t,[o,"Nvidia"],[i,u]],[/(playstation\s[34portablevi]+)/i],[t,[o,"Sony"],[i,u]],[/(sprint\s(\w+))/i],[[o,m.str,w.device.sprint.vendor],[t,m.str,w.device.sprint.model],[i,c]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[o,t,[i,f]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[o,[t,/_/g," "],[i,c]],[/(nexus\s9)/i],[t,[o,"HTC"],[i,f]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[t,[o,"Huawei"],[i,c]],[/(microsoft);\s(lumia[\s\w]+)/i],[o,t,[i,c]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[t,[o,"Microsoft"],[i,u]],[/(kin\.[onetw]{3})/i],[[t,/\./g," "],[o,"Microsoft"],[i,c]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[t,[o,"Motorola"],[i,c]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[t,[o,"Motorola"],[i,f]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[o,v.trim],[t,v.trim],[i,h]],[/hbbtv.+maple;(\d+)/i],[[t,/^/,"SmartTV"],[o,"Samsung"],[i,h]],[/\(dtv[\);].+(aquos)/i],[t,[o,"Sharp"],[i,h]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[o,"Samsung"],t,[i,f]],[/smart-tv.+(samsung)/i],[o,[i,h],t],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[o,"Samsung"],t,[i,c]],[/sie-(\w*)/i],[t,[o,"Siemens"],[i,c]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[o,"Nokia"],t,[i,c]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[t,[o,"Acer"],[i,f]],[/android.+([vl]k\-?\d{3})\s+build/i],[t,[o,"LG"],[i,f]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[o,"LG"],t,[i,f]],[/(lg) netcast\.tv/i],[o,t,[i,h]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[t,[o,"LG"],[i,c]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[t,[o,"Lenovo"],[i,f]],[/linux;.+((jolla));/i],[o,t,[i,c]],[/((pebble))app\/[\d\.]+\s/i],[o,t,[i,p]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[o,t,[i,c]],[/crkey/i],[[t,"Chromecast"],[o,"Google"]],[/android.+;\s(glass)\s\d/i],[t,[o,"Google"],[i,p]],[/android.+;\s(pixel c)[\s)]/i],[t,[o,"Google"],[i,f]],[/android.+;\s(pixel( [23])?( xl)?)\s/i],[t,[o,"Google"],[i,c]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[t,/_/g," "],[o,"Xiaomi"],[i,c]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[t,/_/g," "],[o,"Xiaomi"],[i,f]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[t,[o,"Meizu"],[i,f]],[/(mz)-([\w-]{2,})/i],[[o,"Meizu"],t,[i,c]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})\s+build/i],[t,[o,"OnePlus"],[i,c]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[t,[o,"RCA"],[i,f]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[t,[o,"Dell"],[i,f]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[t,[o,"Verizon"],[i,f]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[o,"Barnes & Noble"],t,[i,f]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[t,[o,"NuVision"],[i,f]],[/android.+;\s(k88)\sbuild/i],[t,[o,"ZTE"],[i,f]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[t,[o,"Swiss"],[i,c]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[t,[o,"Swiss"],[i,f]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[t,[o,"Zeki"],[i,f]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[o,"Dragon Touch"],t,[i,f]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[t,[o,"Insignia"],[i,f]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[t,[o,"NextBook"],[i,f]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[o,"Voice"],t,[i,c]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[o,"LvTel"],t,[i,c]],[/android.+;\s(PH-1)\s/i],[t,[o,"Essential"],[i,c]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[t,[o,"Envizen"],[i,f]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[o,t,[i,f]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[t,[o,"MachSpeed"],[i,f]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[o,t,[i,f]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[t,[o,"Rotor"],[i,f]],[/android.+(KS(.+))\s+build/i],[t,[o,"Amazon"],[i,f]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[o,t,[i,f]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[i,v.lowerize],o,t],[/(android[\w\.\s\-]{0,9});.+build/i],[t,[o,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[s,[n,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[n,s],[/rv\:([\w\.]{1,9}).+(gecko)/i],[s,n]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[n,s],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[n,[s,m.str,w.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[n,"Windows"],[s,m.str,w.os.windows.version]],[/\((bb)(10);/i],[[n,"BlackBerry"],s],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]*)/i,/linux;.+(sailfish);/i],[n,s],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[n,"Symbian"],s],[/\((series40);/i],[n],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[n,"Firefox OS"],s],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[n,s],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[n,"Chromium OS"],s],[/(sunos)\s?([\w\.\d]*)/i],[[n,"Solaris"],s],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[n,s],[/(haiku)\s(\w+)/i],[n,s],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[s,/_/g,"."],[n,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[n,"Mac OS"],[s,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[n,s]]},g=function(e,t){if("object"==typeof e&&(t=e,e=l),!(this instanceof g))return new g(e,t).getResult();var n=e||(r&&r.navigator&&r.navigator.userAgent?r.navigator.userAgent:""),i=t?v.extend(y,t):y;return this.getBrowser=function(){var e={name:l,version:l};return m.rgx.call(e,n,i.browser),e.major=v.major(e.version),e},this.getCPU=function(){var e={architecture:l};return m.rgx.call(e,n,i.cpu),e},this.getDevice=function(){var e={vendor:l,model:l,type:l};return m.rgx.call(e,n,i.device),e},this.getEngine=function(){var e={name:l,version:l};return m.rgx.call(e,n,i.engine),e},this.getOS=function(){var e={name:l,version:l};return m.rgx.call(e,n,i.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=e,this},this};g.VERSION="0.7.19",g.BROWSER={NAME:n,MAJOR:"major",VERSION:s},g.CPU={ARCHITECTURE:a},g.DEVICE={MODEL:t,VENDOR:o,TYPE:i,CONSOLE:u,MOBILE:c,SMARTTV:h,TABLET:f,WEARABLE:p,EMBEDDED:"embedded"},g.ENGINE={NAME:n,VERSION:s},g.OS={NAME:n,VERSION:s},x.exports&&(k=x.exports=g),k.UAParser=g;var b=r&&(r.jQuery||r.Zepto);if(typeof b!==e&&!b.ua){var _=new g;b.ua=_.getResult(),b.ua.get=function(){return _.getUA()},b.ua.set=function(e){_.setUA(e);var t=_.getResult();for(var n in t)b.ua[n]=t[n]}}}("object"==typeof window?window:e)}).UAParser;var tn=function(t,e,n,i){try{return i?e(p(n)[0],n[1]):e(n)}catch(e){var r=t.return;throw void 0!==r&&p(r.call(t)),e}},nn=le("iterator"),rn=Array.prototype,on=function(e){return void 0!==e&&(F.Array===e||rn[nn]===e)},sn=function(e,t,n){t in e?l.f(e,t,S(0,n)):e[t]=n},an=le("toStringTag"),un="Arguments"==D(function(){return arguments}()),cn=function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),an))?n:un?D(t):"Object"==(i=D(t))&&"function"==typeof t.callee?"Arguments":i},fn=le("iterator"),ln=v.getIteratorMethod=function(e){if(null!=e)return e[fn]||e["@@iterator"]||F[cn(e)]},dn=le("iterator"),hn=!1;try{[7][dn]().return=function(){hn=!0}}catch(e){}var pn=function(e,t){if(!t&&!hn)return!1;var n=!1;try{var i=[7],r=i[dn]();r.next=function(){return{done:n=!0}},i[dn]=function(){return r},e(i)}catch(e){}return n};T(T.S+T.F*!pn(function(e){}),"Array",{from:function(e){var t,n,i,r,o=we(e),s="function"==typeof this?this:Array,a=arguments.length,u=1<a?arguments[1]:void 0,c=void 0!==u,f=0,l=ln(o);if(c&&(u=g(u,2<a?arguments[2]:void 0,2)),null==l||s==Array&&on(l))for(n=new s(t=H(o.length));f<t;f++)sn(n,f,c?u(o[f],f):o[f]);else for(r=l.call(o),n=new s;!(i=r.next()).done;f++)sn(n,f,c?tn(r,u,[i.value,f],!0):i.value);return n.length=f,n}});var vn=v.Array.from,mn=n(function(e){e.exports={default:vn,__esModule:!0}}),wn=t(mn),yn=t(n(function(e,t){t.__esModule=!0;var n,i=(n=mn)&&n.__esModule?n:{default:n};t.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,i.default)(e)}}));var gn=function(o){var s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(e,t,n){e[t]=n};return function e(t,n,i){if($t(t)||Xt(t)){for(var r in n=Qt(n)?Xt(t)?{}:[]:n,t)s(n,r,e(t[r],n[r],r));return n}return o(t,n,i)}}(function(e){return e});function bn(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length<2)throw new Error("deepAssign accept two and more argument");for(var i=t.length-1;-1<i;i--)if(Qt(t[i]))throw new TypeError("deepAssign only accept non primitive type");var r=t.shift();return t.forEach(function(e){return gn(e,r)}),r}var _n,xn,kn,En=function(e,t,n,i){if(!(e instanceof t)||void 0!==i&&i in e)throw TypeError(n+": incorrect invocation!");return e},On=n(function(e){var d={},h={},t=e.exports=function(e,t,n,i,r){var o,s,a,u,c=r?function(){return e}:ln(e),f=g(n,i,t?2:1),l=0;if("function"!=typeof c)throw TypeError(e+" is not iterable!");if(on(c)){for(o=H(e.length);l<o;l++)if((u=t?f(p(s=e[l])[0],s[1]):f(e[l]))===d||u===h)return u}else for(a=c.call(e);!(s=a.next()).done;)if((u=tn(a,f,s.value,t))===d||u===h)return u};t.BREAK=d,t.RETURN=h}),Sn=le("species"),An=function(e,t){var n,i=p(e).constructor;return void 0===i||null==(n=p(i)[Sn])?t:s(n)},Tn=x.process,Mn=x.setImmediate,Pn=x.clearImmediate,jn=x.MessageChannel,Nn=x.Dispatch,Ln=0,Cn={},zn="onreadystatechange",Rn=function(){var e=+this;if(Cn.hasOwnProperty(e)){var t=Cn[e];delete Cn[e],t()}},Fn=function(e){Rn.call(e.data)};Mn&&Pn||(Mn=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return Cn[++Ln]=function(){!function(e,t,n){var i=void 0===n;switch(t.length){case 0:return i?e():e.call(n);case 1:return i?e(t[0]):e.call(n,t[0]);case 2:return i?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return i?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return i?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}e.apply(n,t)}("function"==typeof e?e:Function(e),t)},_n(Ln),Ln},Pn=function(e){delete Cn[e]},"process"==D(Tn)?_n=function(e){Tn.nextTick(g(Rn,e,1))}:Nn&&Nn.now?_n=function(e){Nn.now(g(Rn,e,1))}:jn?(kn=(xn=new jn).port2,xn.port1.onmessage=Fn,_n=g(kn.postMessage,kn,1)):x.addEventListener&&"function"==typeof postMessage&&!x.importScripts?(_n=function(e){x.postMessage(e+"","*")},x.addEventListener("message",Fn,!1)):_n=zn in a("script")?function(e){oe.appendChild(a("script"))[zn]=function(){oe.removeChild(this),Rn.call(e)}}:function(e){setTimeout(g(Rn,e,1),0)});var Bn={set:Mn,clear:Pn},Dn=Bn.set,Gn=x.MutationObserver||x.WebKitMutationObserver,In=x.process,Vn=x.Promise,Hn="process"==D(In);function Wn(e){var n,i;this.promise=new e(function(e,t){if(void 0!==n||void 0!==i)throw TypeError("Bad Promise constructor");n=e,i=t}),this.resolve=s(n),this.reject=s(i)}var qn,Un,$n,Kn,Xn,Yn,Jn={f:function(e){return new Wn(e)}},Qn=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}},Zn=x.navigator,ei=Zn&&Zn.userAgent||"",ti=function(e,t){if(p(e),k(t)&&t.constructor===e)return t;var n=Jn.f(e);return(0,n.resolve)(t),n.promise},ni=function(e,t,n){for(var i in t)n&&e[i]?e[i]=t[i]:A(e,i,t[i]);return e},ii=le("species"),ri=Bn.set,oi=function(){var n,i,r,e=function(){var e,t;for(Hn&&(e=In.domain)&&e.exit();n;){t=n.fn,n=n.next;try{t()}catch(e){throw n?r():i=void 0,e}}i=void 0,e&&e.enter()};if(Hn)r=function(){In.nextTick(e)};else if(!Gn||x.navigator&&x.navigator.standalone)if(Vn&&Vn.resolve){var t=Vn.resolve(void 0);r=function(){t.then(e)}}else r=function(){Dn.call(x,e)};else{var o=!0,s=document.createTextNode("");new Gn(e).observe(s,{characterData:!0}),r=function(){s.data=o=!o}}return function(e){var t={fn:e,next:void 0};i&&(i.next=t),n||(n=t,r()),i=t}}(),si="Promise",ai=x.TypeError,ui=x.process,ci=ui&&ui.versions,fi=ci&&ci.v8||"",li=x[si],di="process"==cn(ui),hi=function(){},pi=Un=Jn.f,vi=!!function(){try{var e=li.resolve(1),t=(e.constructor={})[le("species")]=function(e){e(hi,hi)};return(di||"function"==typeof PromiseRejectionEvent)&&e.then(hi)instanceof t&&0!==fi.indexOf("6.6")&&-1===ei.indexOf("Chrome/66")}catch(e){}}(),mi=function(e){var t;return!(!k(e)||"function"!=typeof(t=e.then))&&t},wi=function(f,n){if(!f._n){f._n=!0;var i=f._c;oi(function(){for(var u=f._v,c=1==f._s,e=0,t=function(e){var t,n,i,r=c?e.ok:e.fail,o=e.resolve,s=e.reject,a=e.domain;try{r?(c||(2==f._h&&bi(f),f._h=1),!0===r?t=u:(a&&a.enter(),t=r(u),a&&(a.exit(),i=!0)),t===e.promise?s(ai("Promise-chain cycle")):(n=mi(t))?n.call(t,o,s):o(t)):s(u)}catch(e){a&&!i&&a.exit(),s(e)}};i.length>e;)t(i[e++]);f._c=[],f._n=!1,n&&!f._h&&yi(f)})}},yi=function(o){ri.call(x,function(){var e,t,n,i=o._v,r=gi(o);if(r&&(e=Qn(function(){di?ui.emit("unhandledRejection",i,o):(t=x.onunhandledrejection)?t({promise:o,reason:i}):(n=x.console)&&n.error&&n.error("Unhandled promise rejection",i)}),o._h=di||gi(o)?2:1),o._a=void 0,r&&e.e)throw e.v})},gi=function(e){return 1!==e._h&&0===(e._a||e._c).length},bi=function(t){ri.call(x,function(){var e;di?ui.emit("rejectionHandled",t):(e=x.onrejectionhandled)&&e({promise:t,reason:t._v})})},_i=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),wi(t,!0))},xi=function(e){var n,i=this;if(!i._d){i._d=!0,i=i._w||i;try{if(i===e)throw ai("Promise can't be resolved itself");(n=mi(e))?oi(function(){var t={_w:i,_d:!1};try{n.call(e,g(xi,t,1),g(_i,t,1))}catch(e){_i.call(t,e)}}):(i._v=e,i._s=1,wi(i,!1))}catch(e){_i.call({_w:i,_d:!1},e)}}};vi||(li=function(e){En(this,li,si,"_h"),s(e),qn.call(this);try{e(g(xi,this,1),g(_i,this,1))}catch(e){_i.call(this,e)}},(qn=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=ni(li.prototype,{then:function(e,t){var n=pi(An(this,li));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=di?ui.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&wi(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),$n=function(){var e=new qn;this.promise=e,this.resolve=g(xi,e,1),this.reject=g(_i,e,1)},Jn.f=pi=function(e){return e===li||e===Kn?new $n(e):Un(e)}),T(T.G+T.W+T.F*!vi,{Promise:li}),pe(li,si),Yn="function"==typeof v[Xn=si]?v[Xn]:x[Xn],O&&Yn&&!Yn[ii]&&l.f(Yn,ii,{configurable:!0,get:function(){return this}}),Kn=v[si],T(T.S+T.F*!vi,si,{reject:function(e){var t=pi(this);return(0,t.reject)(e),t.promise}}),T(T.S+!0*T.F,si,{resolve:function(e){return ti(this===Kn?li:this,e)}}),T(T.S+T.F*!(vi&&pn(function(e){li.all(e).catch(hi)})),si,{all:function(e){var s=this,t=pi(s),a=t.resolve,u=t.reject,n=Qn(function(){var i=[],r=0,o=1;On(e,!1,function(e){var t=r++,n=!1;i.push(void 0),o++,s.resolve(e).then(function(e){n||(n=!0,i[t]=e,--o||a(i))},u)}),--o||a(i)});return n.e&&u(n.v),t.promise},race:function(e){var t=this,n=pi(t),i=n.reject,r=Qn(function(){On(e,!1,function(e){t.resolve(e).then(n.resolve,i)})});return r.e&&i(r.v),n.promise}}),T(T.P+T.R,"Promise",{finally:function(t){var n=An(this,v.Promise||x.Promise),e="function"==typeof t;return this.then(e?function(e){return ti(n,t()).then(function(){return e})}:t,e?function(e){return ti(n,t()).then(function(){throw e})}:t)}}),T(T.S,"Promise",{try:function(e){var t=Jn.f(this),n=Qn(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}});var ki=v.Promise;t(n(function(e){e.exports={default:ki,__esModule:!0}}));var Ei="undefined"!=typeof window&&"[object Object]"!==Object.prototype.toString.call(window);var Oi=Ei&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame)||function(e){return setTimeout(e,17)},Si=Ei&&(window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.oCancelAnimationFrame)||function(e){clearTimeout(e)},Ai=Object.assign,Ti=!Ai||E(function(){var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach(function(e){t[e]=e}),7!=Ai({},e)[n]||Object.keys(Ai({},t)).join("")!=i})?function(e,t){for(var n=we(e),i=arguments.length,r=1,o=Ge.f,s=Ie.f;r<i;)for(var a,u=G(arguments[r++]),c=o?ne(u).concat(o(u)):ne(u),f=c.length,l=0;l<f;)s.call(u,a=c[l++])&&(n[a]=u[a]);return n}:Ai;T(T.S+T.F,"Object",{assign:Ti});var Mi=v.Object.assign,Pi=t(n(function(e){e.exports={default:Mi,__esModule:!0}}));T(T.S,"Object",{create:fe});var ji=v.Object,Ni=function(e,t){return ji.create(e,t)},Li=t(n(function(e){e.exports={default:Ni,__esModule:!0}})),Ci=Li(null);function zi(e,t){var n=e.__evt_id;n||(Object.defineProperty(e,"__evt_id",{writable:!0,enumerable:!1,configurable:!0}),n=e.__evt_id=++Ci.count);var i=n+"_"+t,r=Ci[i];return r||(r=Ci[i]=[]),r}function Ri(i,r,o){var s=3<arguments.length&&void 0!==arguments[3]&&arguments[3],e=arguments[4];Kt(s)&&!e&&(e=s,s=void 0);var t=[o,void 0,s];s&&!e&&(e=function(){Fi(i,r,o,s);for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];o.apply(i,t)}),e&&(t[1]=e),zi(i,r).push(t)}function Fi(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]&&arguments[3],r=zi(e,t);if(n||i){var o=-1,s=void 0;return r.find(function(e,t){if((!n||e[0]===n)&&(!i||e[2]))return o=t,s=e[1],!0}),-1!==o&&r.splice(o,1),s}r.length=0}Ci.count=0;!function(){function i(t,e){var n=this;if(r(this,i),Object.defineProperty(this,"__target",{writable:!0,enumerable:!1,configurable:!0}),this.__target=this,t){if("object"!==(void 0===t?"undefined":Pt(t)))throw new Error("CusEvent target are not object");this.__target=t,e&&["on","once","off","emit"].forEach(function(e){t[e]=n[e]})}}j(i,[{key:"on",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];return Ri(this.__target,e,t,n),this}},{key:"once",value:function(e,t){return this.on(e,t,!0)}},{key:"off",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];return Fi(this.__target,e,t,n),this}},{key:"emit",value:function(e,t){var n,i,r,o;return n=this.__target,i=e,r={data:t},(o=Li(null)).type=i,o.target=n,r&&Pi(o,Xt(r)?r:{data:r}),zi(n,i).forEach(function(e){(e[1]||e[0]).apply(n,[o])}),this}}])}();var Bi=Ei?document.createElement("div"):{},Di="innerText";"textContent"in Bi&&(Di="textContent");var Gi=Array.prototype;var Ii=!1;try{var Vi=Object.defineProperty({},"passive",{get:function(){Ii=!0}});Ei&&window.addEventListener("test",null,Vi)}catch(e){console.error(e)}function Hi(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]&&arguments[3],r=4<arguments.length&&void 0!==arguments[4]&&arguments[4];if(void 0!==r&&!Jt(r)&&Ii&&(r={passive:!0}),i){var o=Fi(e,t+"_once",n);o&&(n=o)}e.removeEventListener(t,n,r)}function Wi(i,r,o){var s=3<arguments.length&&void 0!==arguments[3]&&arguments[3],a=4<arguments.length&&void 0!==arguments[4]&&arguments[4];if(void 0!==a&&!Jt(a)&&Ii&&(a={passive:!0}),s){var u=o;Ri(i,r+"_once",u,o=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];u.apply(this,t),Hi(i,r,o,s,a)})}i.addEventListener(r,o,a)}function qi(r,o,e,s){var t=4<arguments.length&&void 0!==arguments[4]&&arguments[4];void 0!==t&&!Jt(t)&&Ii&&(t={passive:!0});var n=function(e){var n=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=arguments[2],i=arguments[3],r=[];n&&r.push(e);for(;e&&e.parentNode!==t;)(e=e.parentNode)&&r.push(e);i&&r.push(t);return r}(e.target||e.srcElement,r,!0),t=$i(o,r,!0),i=void 0;t.find?i=t.find(function(t){return n.find(function(e){return t===e})}):t.forEach(function(t){return!i&&n.forEach(function(e){i||t!==e||(i=e)})}),i&&s.apply(i,arguments)};Ri(r,e+"_delegate_"+o,s,n),r.addEventListener(e,n,t)}function Ui(e,t,n){if(Xt(t))for(var i in t)Ui(e,i,t[i]);else e.style[t]=n}function $i(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document,n=arguments[2],i=t.querySelectorAll(e);return n?wn(i):i}var Ki=function(){function i(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document;r(this,i);var n=void 0;n=(this.selector=e)&&e.constructor===NodeList?wn(e):$t(e)?e:Yt(e)?0===e.indexOf("<")?(Bi.innerHTML=e,$i("*",Bi,!0)):$i(e,t,!0):[e],Pi(this,n),this.length=n.length}return j(i,[{key:"each",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return Gi.forEach.apply(this,t),this}},{key:"push",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return Gi.push.apply(this,t),this}},{key:"splice",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return Xi(Gi.splice.apply(this,t))}},{key:"find",value:function(t){var n=[];this.each(function(e){n=n.concat($i(t,e,!0))});var e=Xi(n);return e.parent=this,e.selector=t,e}},{key:"append",value:function(e){var t=Xi(e),n=this[0];return t.each(function(e){return n.appendChild(e)}),this}},{key:"appendTo",value:function(e){return Xi(e).append(this),this}},{key:"text",value:function(t){return 0===arguments.length?this[0][Di]:this.each(function(e){e[Di]=t})}},{key:"html",value:function(t){return 0===arguments.length?this[0].innerHTML:this.each(function(e){e.innerHTML=t})}},{key:"attr",value:function(r,o){return 1===arguments.length?(e=this[0],t=r,e.getAttribute(t)):this.each(function(e){return t=e,n=r,void(void 0===(i=o)?t.removeAttribute(n):t.setAttribute(n,i));var t,n,i});var e,t}},{key:"data",value:function(t,n){return 0===arguments.length?this[0].dataset||{}:1===arguments.length?(this[0].dataset||{})[t]:this.each(function(e){(e.dataset||(e.dataset={}))[t]=n})}},{key:"css",value:function(t,n){return 1!==arguments.length||Xt(t)?this.each(function(e){return Ui(e,t,n)}):(e=this[0],i=t,(e.currentStyle||document.defaultView.getComputedStyle(e,null))[i]||e.style[i]);var e,i}},{key:"addClass",value:function(t){return this.each(function(e){return function(t,e){if(e&&(e=e.trim())){var n=e.split(/\s+/);if(t.classList)n.forEach(function(e){return t.classList.add(e)});else{var i=" "+(t.className||"")+" ";n.forEach(function(e){-1===i.indexOf(" "+e+" ")&&(i+=" "+e)}),t.className=i.trim()}}}(e,t)})}},{key:"removeClass",value:function(t){return this.each(function(e){return function(t,e){if(e&&(e=e.trim())){var n=e.split(/\s+/);if(t.classList)n.forEach(function(e){return t.classList.remove(e)});else{var i=" "+t.className+" ";n.forEach(function(e){for(var t=" "+e+" ";-1!==i.indexOf(t);)i=i.replace(t," ")}),t.className=i.trim()}}}(e,t)})}},{key:"hasClass",value:function(e){return t=this[0],new RegExp("(?:^|\\s)"+e+"(?=\\s|$)").test(t.className);var t}},{key:"on",value:function(t,n){var i=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=3<arguments.length&&void 0!==arguments[3]&&arguments[3];return this.each(function(e){return Wi(e,t,n,i,r)})}},{key:"off",value:function(t,n){var i=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=3<arguments.length&&void 0!==arguments[3]&&arguments[3];return this.each(function(e){return Hi(e,t,n,i,r)})}},{key:"delegate",value:function(t,n,i){var r=3<arguments.length&&void 0!==arguments[3]&&arguments[3];return this.each(function(e){return qi(e,t,n,i,r)})}},{key:"undelegate",value:function(t,n,i){var r=3<arguments.length&&void 0!==arguments[3]&&arguments[3];return this.each(function(e){return function(e,t,n,i){var r=4<arguments.length&&void 0!==arguments[4]&&arguments[4];void 0!==r&&!Jt(r)&&Ii&&(r={passive:!0});var o=Fi(e,n+"_delegate_"+t,i);o&&e.removeEventListener(n,o,r)}(e,t,n,i,r)})}},{key:"remove",value:function(){return this.each(function(e){var t;(t=e).parentNode.removeChild(t)})}}]),i}();function Xi(e,t){return e.constructor===Ki?e:new Ki(e,t)}var Yi=function(){function n(e,t){r(this,n),this.create(e.pDom),this.thread=e.thread,this.renderTime=e.renderTime,this.timer=null,this.pDom=e.pDom,this.fontSize=t.fontSize,this.lineHeight=t.lineHeight}return j(n,[{key:"create",value:function(e){var t=document.createElement("canvas");t.className="chimee-danmu-content",e.appendChild(t),this.layer=t,this.width=this.layer.width=e.offsetWidth,this.height=this.layer.height=e.offsetHeight,this.context=this.layer.getContext("2d")}},{key:"destroy",value:function(){Si.call(window,this.timer),this.layer.parentNode.removeChild(this.layer)}},{key:"createPiece",value:function(e){var t=document.createElement("canvas"),n=t.getContext("2d"),i="small"===e.fontSize?.6:1,r="number"==typeof e.fontSize?Math.floor(e.fontSize)+"px":Math.floor(i*this.fontSize)+"px",o=e.fontFamily||"serif";return n.font=r+" "+o,t.width=n.measureText(e.text).width,t.height=this.lineHeight,n.font=r+" "+o,n.textAlign="left",n.textBaseline="top",n.fillStyle=e.color||"#ffffff",n.fillText(e.text,0,0),t}},{key:"start",value:function(){this.render()}},{key:"pause",value:function(){Si.call(window,this.timer)}},{key:"draw",value:function(e){this.context.drawImage(e.piece,e.offset.x,e.offset.y,e.piece.width,e.piece.height)}},{key:"resize",value:function(){this.width=this.layer.width=this.pDom.offsetWidth,this.height=this.layer.height=this.pDom.offsetHeight,this.render(),this.pause()}},{key:"render",value:function(){var r=this;this.clear(),this.thread.pool.forEach(function(e,t){if(r.draw(e),"flow"===e.mode)e.offset.x-=e.speed,e.offset.x<-e.piece.width&&r.thread.remove(t);else{var n=new Date,i=e.row;e.startTime=e.startTime||new Date,5e3<n-e.startTime&&(r.thread.remove(t),r.thread.vRows[i].shift())}}),this.timer=Oi.call(window,function(){r.render()})}},{key:"clear",value:function(){this.context.clearRect(0,0,this.layer.width,this.layer.height)}}]),n}(),Ji=function(){function n(e,t){r(this,n),this.pool=[],this.pDom=e,this.config=t,this.resize()}return j(n,[{key:"resize",value:function(){this.rows=Math.floor(parseInt(this.pDom.offsetHeight)/this.config.lineHeight),this.vRows=Pi(new Array(this.rows),this.vRows)}},{key:"get",value:function(e){return this.pool[e]}},{key:"push",value:function(e){this.pool.push(e)}},{key:"remove",value:function(e){this.pool.splice(e,1)}},{key:"empty",value:function(){this.pool=[],this.vRows=new Array(this.rows)}}]),n}(),Qi=Ye.f;jt("getOwnPropertyDescriptor",function(){return function(e,t){return Qi(I(e),t)}});var Zi=v.Object,er=function(e,t){return Zi.getOwnPropertyDescriptor(e,t)},tr=t(n(function(e){e.exports={default:er,__esModule:!0}})),nr=x.Reflect,ir=nr&&nr.ownKeys||function(e){var t=We.f(p(e)),n=Ge.f;return n?t.concat(n(e)):t};T(T.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,n,i=I(e),r=Ye.f,o=ir(i),s={},a=0;o.length>a;)void 0!==(n=r(i,t=o[a++]))&&sn(s,t,n);return s}});var rr=v.Object.getOwnPropertyDescriptors,or=t(n(function(e){e.exports={default:rr,__esModule:!0}})),sr=v.Object.getOwnPropertySymbols,ar=t(n(function(e){e.exports={default:sr,__esModule:!0}}));jt("getOwnPropertyNames",function(){return Ke.f});var ur=v.Object,cr=function(e){return ur.getOwnPropertyNames(e)},fr=t(n(function(e){e.exports={default:cr,__esModule:!0}}));var lr=le("iterator"),dr=v.isIterable=function(e){var t=Object(e);return void 0!==t[lr]||"@@iterator"in t||F.hasOwnProperty(cn(t))},hr=n(function(e){e.exports={default:dr,__esModule:!0}});t(hr);var pr=v.getIterator=function(e){var t=ln(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return p(t.call(e))},vr=n(function(e){e.exports={default:pr,__esModule:!0}});t(vr),t(n(function(e,t){t.__esModule=!0;var n=i(hr),u=i(vr);function i(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if(Array.isArray(e))return e;if((0,n.default)(Object(e)))return function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=(0,u.default)(e);!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})),jt("getPrototypeOf",function(){return function(e){return be(we(e))}});var mr=v.Object.getPrototypeOf,wr=t(n(function(e){e.exports={default:mr,__esModule:!0}})),yr=le("species"),gr=function(e,t){return Ve(n=e)&&("function"!=typeof(i=n.constructor)||i!==Array&&!Ve(i.prototype)||(i=void 0),k(i)&&null===(i=i[yr])&&(i=void 0)),new(void 0===i?Array:i)(t);var n,i},br=function(l,e){var d=1==l,h=2==l,p=3==l,v=4==l,m=6==l,w=5==l||m,y=e||gr;return function(e,t,n){for(var i,r,o=we(e),s=G(o),a=g(t,n,3),u=H(s.length),c=0,f=d?y(e,u):h?y(e,0):void 0;c<u;c++)if((w||c in s)&&(r=a(i=s[c],c,o),l))if(d)f[c]=r;else if(r)switch(l){case 3:return!0;case 5:return i;case 6:return c;case 2:f.push(i)}else if(v)return!1;return m?-1:p||v?v:f}},_r=function(e,t){if(!k(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e},xr=Fe.getWeak,kr=br(5),Er=br(6),Or=0,Sr=function(e){return e._l||(e._l=new Ar)},Ar=function(){this.a=[]},Tr=function(e,t){return kr(e.a,function(e){return e[0]===t})};Ar.prototype={get:function(e){var t=Tr(this,e);if(t)return t[1]},has:function(e){return!!Tr(this,e)},set:function(e,t){var n=Tr(this,e);n?n[1]=t:this.a.push([e,t])},delete:function(t){var e=Er(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}};var Mr,Pr={getConstructor:function(e,n,i,r){var o=e(function(e,t){En(e,o,n,"_i"),e._t=n,e._i=Or++,e._l=void 0,null!=t&&On(t,i,e[r],e)});return ni(o.prototype,{delete:function(e){if(!k(e))return!1;var t=xr(e);return!0===t?Sr(_r(this,n)).delete(e):t&&m(t,this._i)&&delete t[this._i]},has:function(e){if(!k(e))return!1;var t=xr(e);return!0===t?Sr(_r(this,n)).has(e):t&&m(t,this._i)}}),o},def:function(e,t,n){var i=xr(p(t),!0);return!0===i?Sr(e).set(t,n):i[e._i]=n,e},ufstore:Sr},jr=l.f,Nr=br(0);n(function(e){var o,n,t,i,r,s,a,u,c,f,l,d,h=br(0),p="WeakMap",v=Fe.getWeak,m=Object.isExtensible,w=Pr.ufstore,y={},g=function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}},b={get:function(e){if(k(e)){var t=v(e);return!0===t?w(_r(this,p)).get(e):t?t[this._i]:void 0}},set:function(e,t){return Pr.def(_r(this,p),e,t)}},_=e.exports=(t=g,i=b,r=Pr,a=s=!0,u=x[n=p],f=s?"set":"add",l=(c=u)&&c.prototype,d={},O&&"function"==typeof c&&(a||l.forEach&&!E(function(){(new c).entries().next()}))?(c=t(function(e,t){En(e,c,n,"_c"),e._c=new u,null!=t&&On(t,s,e[f],e)}),Nr("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(i){var r="add"==i||"set"==i;i in l&&(!a||"clear"!=i)&&A(c.prototype,i,function(e,t){if(En(this,c,i),!r&&a&&!k(e))return"get"==i&&void 0;var n=this._c[i](0===e?0:e,t);return r?this:n})}),a||jr(c.prototype,"size",{get:function(){return this._c.size}})):(c=r.getConstructor(t,n,s,f),ni(c.prototype,i),Fe.NEED=!0),pe(c,n),d[n]=c,T(T.G+T.W+T.F,d),a||r.setStrong(c,n,s),c);E(function(){return 7!=(new _).set((Object.freeze||Object)(y),7).get(y)})&&(o=Pr.getConstructor(g,p),Ti(o.prototype,b),Fe.NEED=!0,h(["delete","has","get","set"],function(i){var e=_.prototype,r=e[i];R(e,i,function(e,t){if(!k(e)||m(e))return r.call(this,e,t);this._f||(this._f=new o);var n=this._f[i](e,t);return"set"==i?this:n})}))});Mr="WeakMap",T(T.S,Mr,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}});var Lr;Lr="WeakMap",T(T.S,Lr,{from:function(e){var t,n,i,r,o=arguments[1];return s(this),(t=void 0!==o)&&s(o),null==e?new this:(n=[],t?(i=0,r=g(o,arguments[2],2),On(e,!1,function(e){n.push(r(e,i++))})):On(e,!1,n.push,n),new this(n))}});var Cr=v.WeakMap,zr=t(n(function(e){e.exports={default:Cr,__esModule:!0}}));t(n(function(e,t){t.__esModule=!0;var n,i=(n=M)&&n.__esModule?n:{default:n};t.default=function(e,t,n){return t in e?(0,i.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}}));var Rr=Fe.onFreeze;jt("preventExtensions",function(t){return function(e){return t&&k(e)?t(Rr(e)):e}});var Fr=v.Object.preventExtensions;t(n(function(e){e.exports={default:Fr,__esModule:!0}}));var Br=tr;var Dr,Gr,Ir=(Dr=fr,Kt(Gr=ar)?function(e){return wn(Dr(e).concat(Gr(e)))}:Dr);var Vr=Kt(or)?or:function(n){return Ir(n).reduce(function(e,t){return e[t]=Br(n,t),e},{})},Hr=P;var Wr,qr=function(d){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},h=e.requirement,t=e.customArgs,p=void 0!==t&&t;return function(){for(var e=arguments.length,o=Array(1<e?e-1:0),t=1;t<e;t++)o[t-1]=arguments[t];var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=n.exclude,s=void 0===i?[]:i,r=n.include,a=void 0===r?[]:r,u=n.construct,c=void 0!==u&&u,f=n.self,l=void 0!==f&&f;if(!$t(s))throw new TypeError("options.exclude must be an array");if(!$t(a))throw new TypeError("options.include must be an array");return function(e){var n=Kt(e);if(!l&&!n)throw new TypeError("@"+d.name+"Class can only be used on class");if(l&&Qt(e))throw new TypeError("@"+d.name+"Class must be used on non-primitive type value in 'self' mode");var i=l?e:e.prototype;if(Ut(i))throw new Error("The prototype of the "+e.name+" is empty, please check it");var r=Vr(i);Ir(i).concat(a).forEach(function(e){var t=r[e];"constructor"===e&&!c||l&&n&&-1<["name","length","prototype"].indexOf(e)||-1<s.indexOf(e)||Kt(h)&&!1===h(i,e,t,{self:l})||Hr(i,e,(p?d.apply(void 0,yn(o)):d)(i,e,t))})}}}(Kr,{requirement:function(e,t,n){return!!(i=n)&&i.hasOwnProperty("value")&&Jt(i.configurable)&&Jt(i.enumerable)&&Jt(i.writable)&&Kt(n.value);var i}}),Ur=void 0;function $r(e,t){if(void 0===zr)throw new Error("Using @autobind on "+t.name+"() requires WeakMap support due to its use of super."+t.name+"()");Ur||(Ur=new zr),!1===Ur.has(e)&&Ur.set(e,new zr);var i,r,n=Ur.get(e);return!1===n.has(t)&&n.set(t,(r=e,(i=t).bind?i.bind(r):i.apply?function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.apply(r,t)}:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.call.apply(i,[r].concat(yn(t)))})),n.get(t)}function Kr(t,n,e){if(1===arguments.length)return qr()(t);var i=e||{},r=i.value,o=i.configurable;if(!Kt(r))throw new TypeError('@autobind can only be used on functions, not "'+r+'" in '+(void 0===r?"undefined":Pt(r))+' on property "'+n+'"');var s,a=t.constructor;return{configurable:o,enumerable:!1,get:function(){var i=this,e=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.call.apply(r,[i].concat(yn(t)))};return this===t?r:this.constructor!==a&&wr(this).constructor===a?r:this.constructor!==a&&n in this.constructor.prototype?$r(this,r):(P(this,n,{configurable:!0,writable:!0,enumerable:!1,value:e}),e)},set:(s=n,function(e){return P(this,s,{configurable:!0,writable:!0,enumerable:!0,value:e}),e})}}var Xr,Yr,Jr,Qr,Zr,eo,to=(Wr=function(){function n(e,t){r(this,n),this.create(e.pDom),this.thread=e.thread,this.renderTime=e.renderTime,this.timer=null,this.pDom=e.pDom,this.fontSize=t.fontSize,this.lineHeight=t.lineHeight}return j(n,[{key:"create",value:function(e){var t=document.createElement("div");t.className="chimee-danmu-content",e.appendChild(t),this.layer=t,this.width=e.offsetWidth,this.height=e.offsetHeight}},{key:"destroy",value:function(){Si.call(window,this.timer),this.layer.parentNode.removeChild(this.layer)}},{key:"createPiece",value:function(e){var t="small"===e.fontSize?.6:1,n="number"==typeof e.fontSize?Math.floor(e.fontSize)+"px":Math.floor(t*this.fontSize)+"px",i=e.fontFamily||"serif",r=e.color||"#ffffff",o=document.createElement("div");return o.className="danmu-piece",Ui(o,{color:r,fontSize:n,fontFamily:i,transform:"translateX(-9999px)"}),o.textContent=e.text,this.layer.appendChild(o),o.width=o.offsetWidth,o.height=this.lineHeight,o}},{key:"start",value:function(){this.render()}},{key:"pause",value:function(){Si.call(window,this.timer)}},{key:"resize",value:function(){this.width=this.pDom.offsetWidth,this.height=this.pDom.offsetHeight}},{key:"render",value:function(){var r=this;this.thread.pool.forEach(function(e,t){if(Ui(e.piece,"transform","translateX("+e.offset.x+"px) translateY("+e.offset.y+"px) "),"flow"===e.mode)e.offset.x-=e.speed,e.offset.x<-e.piece.width&&(e.piece.parentNode.removeChild(e.piece),r.thread.remove(t));else{var n=new Date,i=e.row;e.startTime=e.startTime||new Date,5e3<n-e.startTime&&(e.piece.parentNode.removeChild(e.piece),r.thread.remove(t),r.thread.vRows[i].shift())}}),this.timer=Oi.call(window,this.render)}},{key:"clear",value:function(){this.layer.innerHTML=""}}]),n}(),Xr=Wr.prototype,Yr="render",Jr=[Kr],Qr=tr(Wr.prototype,"render"),Zr=Wr.prototype,eo={},Object.keys(Qr).forEach(function(e){eo[e]=Qr[e]}),eo.enumerable=!!eo.enumerable,eo.configurable=!!eo.configurable,("value"in eo||eo.initializer)&&(eo.writable=!0),eo=Jr.slice().reverse().reduce(function(e,t){return t(Xr,Yr,e)||e},eo),Zr&&void 0!==eo.initializer&&(eo.value=eo.initializer?eo.initializer.call(Zr):void 0,eo.initializer=void 0),void 0===eo.initializer&&(Object.defineProperty(Xr,Yr,eo),eo=null),Wr),no=0,io=function(){function n(e,t){r(this,n),this.plugin=e,this.pDom=e.$dom,this.config=t,this.thread=new Ji(e.$dom,t),this.changeMode(t.mode||"css"),this.lineHeight=t.lineHeight,this.timer=null}return j(n,[{key:"start",value:function(){this.paper.start()}},{key:"pause",value:function(){this.paper.pause()}},{key:"clear",value:function(){this.thread.empty(),this.paper&&this.paper.clear()}},{key:"destroy",value:function(){this.paper.destroy()}},{key:"resize",value:function(){this.paper.resize(),this.thread.resize()}},{key:"changeMode",value:function(e){e&&e!==this.mode&&(this.thread.empty(),this.paper&&this.destroy(),this.paper="canvas"===e?new Yi(this,this.config):new to(this,this.config),!this.plugin.paused&&this.paper.start(),this.mode=e)}},{key:"_line",value:function(e){for(var t=this.thread.pool,n=t.length,i=new Array(this.thread.rows),r=0,o=n-1;0<=o;o--)if("flow"===t[o].mode){var s=t[o].row;i[s]=i[s]?i[s]:t[o]}for(var a=0,u=0;u<i.length;u++){if(!i[u]){r=u;break}var c=i[u].offset.x+i[u].piece.width;if(e.width<this.paper.width-c){r=u;break}(!a||c<a)&&(a=c,r=i[u].row)}return r}},{key:"_vLine",value:function(e){var n=this.thread.vRows,t=n.length,i=0;return i=n.every(function(e,t){return Array.isArray(n[0])&&e.length===n[0].length})?"top"===e.mode?0:t-1:this._cLine(n,e),n[i]=n[i]?n[i].concat(e):[e],i}},{key:"_cLine",value:function(e,t){for(var n=e.length,i=[],r=0;r<n;r++){var o=0===r?n-1:r-1,s=r===n-1?0:r+1,a=Array.isArray(e[o])?e[o].length:0,u=Array.isArray(e[s])?e[s].length:0,c=Array.isArray(e[r])?e[r].length:0;(!c||c<a||c<u)&&i.push(r)}return"top"===t.node?i[0]:i[i.length-1]}},{key:"emit",value:function(e){if("close"!==this.status){var t={};"string"==typeof e?t.text=e:t=e;(e=bn({text:"ä½ ççå¾æ¼äº®",mode:"flow",fontSize:"big",color:"#fff"},t)).mode=e.mode||"flow";var n=this.paper.createPiece(e),i="flow"===e.mode?this._line(n):this._vLine(e);no++,this.thread.pool.push({id:no,piece:n,text:e.text,mode:e.mode,speed:"number"==typeof e.speed&&0<e.speed&&e.speed||.3*Math.pow(n.width,1/3),row:i,offset:{x:"flow"===e.mode?this.paper.width:(this.paper.width-n.width)/2,y:this.lineHeight*i}})}}},{key:"getPieceByPoint",value:function(i,r){var o=[];return this.thread.pool.map(function(e){var t=[e.offset.x,e.offset.y],n=[e.offset.x+e.piece.width,e.offset.y+e.piece.width];t[0]<=i&&i<=n[0]&&t[1]<=r&&r<=n[1]&&o.push(e)}),o}}]),n}();!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}("chimee-danmu{position:absolute;top:0;left:0;display:block;width:100%;height:100%}chimee-danmu .chimee-danmu-content{position:relative;width:100%;height:100%;user-select:none;overflow:hidden}chimee-danmu .danmu-piece{position:absolute;left:0;top:0;display:inline-block;white-space:pre;pointer-events:none;font-weight:400;line-height:1.125;opacity:1;text-shadow:#000 1px 0 1px,#000 0 1px 1px,#000 0 -1px 1px,#000 -1px 0 1px}",{});var ro={lineHeight:30,fontSize:24,mode:"css",updateByVideo:!0};return{name:"chimeeDanmu",el:"chimee-danmu",data:{status:"open",danmu:{},danmuList:[],currentPostion:0,currentPiece:{}},operable:!0,penetrate:!0,level:2,create:function(){},init:function(e){!e||e.danmu},inited:function(){var e=Xt(this.$config)?bn(ro,this.$config):ro;this.danmu=new io(this,e),Wi(window,"resize",this._resize),this.updateByVideo=e.updateByVideo,!this.updateByVideo&&this.danmu.start()},destroy:function(){this.danmu.destroy(),this.$dom.parentNode.removeChild(this.$dom),Hi(window,"resize",this._resize)},events:{play:function(){this.updateByVideo&&"open"===this.status&&this.danmu.start()},pause:function(){this.updateByVideo&&"open"===this.status&&this.danmu.pause()},timeupdate:function(){if("close"!==this.status)for((1<Math.abs(this.currentTime-this.currentPiece.time)||void 0===this.currentPiece.time)&&this._searchPosition();this.currentTime>=this.currentPiece.time&&this.currentPiece.time;)this.danmu.emit(this.currentPiece),this.currentPiece=this.danmuList[this.currentPostion++]||{}},contextmenu:function(e){e.preventDefault();var t=this.danmu.getPieceByPoint(e.offsetX,e.offsetY);this.$emit("danmuContextmenu",t)}},methods:{_searchPosition:function(){var e=this.danmuList.length;if(0!==e){if(this.currentTime>this.danmuList[e-1].time)return this.currentPiece={},void(this.currentPostion=e+1);if(this.currentTime<this.danmuList[0].time)return this.currentPiece=this.danmuList[0],void(this.currentPostion=0);for(var t=0;t<e;t++){var n=this.danmuList[t];if(n.time>=this.currentTime){this.currentPostion=t,this.currentPiece=n;break}}}},open:function(){this.status="open",this.danmu.start()},close:function(){this.status="close",this.danmu.clear(),this.danmu.pause()},start:function(){this.danmu.start()},pause:function(){this.danmu.pause()},changeMode:function(e){this.danmu.changeMode(e)},sendMsg:function(e){"open"===this.status&&this.danmu.emit(e)},receiveData:function(e){this.danmuList=e,this.currentPiece=this.danmuList[this.currentPostion++]||{}},_resize:function(){this.danmu.resize()}}}});
